= Windows 11 Dev Drive Setup for .NET 8, NuGet, and JetBrains Rider
:toc:
:toclevels: 3
:sectnums:

== Purpose

This guideline describes how to configure *Windows 11 Dev Drive* for software development with:

* .NET 8 SDK
* NuGet package cache
* JetBrains Rider (IntelliJ platform)

Recommended rule:

[quote]
____
Put source code, caches, build artifacts, and SDK toolchains on Dev Drive.  
Keep security agents and production credentials off Dev Drive.
____

== Create and Configure Dev Drive

=== Create Dev Drive (Windows UI)

. Settings -> System -> Storage -> Advanced storage settings -> Disks & volumes  
. Create a new volume  
. Select *Dev Drive (ReFS)*  
. Assign a drive letter (example: `D:`)

=== Configure Microsoft Defender Performance Mode (Optional)

By default, Dev Drive uses performance-optimized scanning.

To disable antivirus filters for all Dev Drives:

[source,powershell]
----
fsutil devdrv trust d:
fsutil devdrv enable /disallowAv
----
=== Exlusion of DevDrive

Windows Security > Virus & treat protection > Virus & treat protection settings > Manage settings

Dev drive protection: "On"

Exclusions > Add or Remove exclusions: Add disk "D:"

== Recommended Folder Structure

[source]
----
D:\
 ├── tools\
 │    ├── dotnet\
 ├── nuget-cache\
 ├── projects\
 └── temp\
----

== Configure .NET 8

=== Install .NET SDK
[source]
----
./dotnet-install.ps1 -Version 8.0.417 -InstallDir D:\tools\dotnet\
./dotnet-install.ps1 -Channel LTS -InstallDir D:\tools\dotnet\
----

=== Redirect NuGet Global Packages Folder
Move to Dev Drive:

[source,powershell]
----
setx NUGET_PACKAGES "D:\nuget-cache\packages"
setx NUGET_HTTP_CACHE_PATH "D:\nuget-cache\http-cache"
setx NUGET_SCRATCH "D:\nuget-cache\scratch"
setx NUGET_PLUGINS_CACHE_PATH "D:\nuget-cache\plugins-cache"

# Verify locations (restart terminal/IDE after setx)
dotnet nuget locals all --list
----

== Configure JetBrains Rider

=== Rider Cache Locations

Edit:

Configure -> Edit Custom Properties

[source,properties]
----
idea.system.path=D:/tools/rider/system
idea.config.path=D:/tools/rider/config
idea.log.path=D:/tools/rider/log
idea.plugins.path=D:/tools/rider/config/plugins
----

Restart Rider.

== Move %TEMP% to Dev Drive
[source,properties]
----
mkdir D:\temp

setx TEMP "D:\temp"
setx TMP  "D:\temp"

----



