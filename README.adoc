= Windows 11 Dev Drive Setup for .NET 8, NuGet, and JetBrains Rider
:toc:
:toclevels: 3
:sectnums:

== Purpose

This guideline describes how to configure *Windows 11 Dev Drive* for software development with:

* .NET 8 SDK
* NuGet package cache
* JetBrains Rider (IntelliJ platform)

The goals are:

* Improve IO performance for builds, restores, and indexing
* Reduce antivirus overhead during development
* Maintain acceptable security posture for developer workstations

== Dev Drive Overview

Dev Drive is optimized for developer workloads using:

* ReFS file system
* Optional Microsoft Defender performance mode (asynchronous scanning)

[WARNING]
====
Dev Drive can reduce real-time antivirus scanning. This improves performance but weakens immediate malware detection. This must align with your organization’s security policies.
====

== When to Install Developer Tools on Dev Drive

Developer tools and SDKs are typically installed in:

[cols="1,2",options="header"]
|===
|Type |Typical Location
|System-wide | `C:\Program Files\`
|Per-user | `%LOCALAPPDATA%`
|Dev Drive (optional) | `D:\dev\tools\`
|===

You may install tools and SDKs on Dev Drive if:

* Asynchronous antivirus scanning is acceptable
* Dev Drive usage is isolated to trusted development workflows
* Security-sensitive production binaries are not installed there

Recommended rule:

[quote]
____
Put source code, caches, build artifacts, and SDK toolchains on Dev Drive.  
Keep security agents and production credentials off Dev Drive.
____

== Create and Configure Dev Drive

=== Create Dev Drive (Windows UI)

. Settings -> System -> Storage -> Advanced storage settings -> Disks & volumes  
. Create a new volume  
. Select *Dev Drive (ReFS)*  
. Assign a drive letter (example: `D:`)

=== Configure Microsoft Defender Performance Mode (Optional)

By default, Dev Drive uses performance-optimized scanning.

To disable antivirus filters for all Dev Drives:

[source,powershell]
----
fsutil devdrv enable /disallowAv
----
== Recommended Folder Structure

[source]
----
D:\
 ├── tools\
 │    ├── dotnet\
 │    └── rider\
 ├── nuget-cache\
 ├── projects\
 └── temp\
----

== Configure .NET 8

=== Install .NET SDK
[source]
----
./dotnet-install.ps1 -Channel LTS -InstallDir D:\tools\dotnet\
----

=== Redirect NuGet Global Packages Folder
Move to Dev Drive:

[source,powershell]
----
setx NUGET_PACKAGES "D:\nuget-cache\packages"
setx NUGET_HTTP_CACHE_PATH "D:\nuget-cache\http-cache"
setx NUGET_TEMP_PATH "D:\nuget-cache\temp"

# Verify locations (restart terminal/IDE after setx)
dotnet nuget locals all --list
----

== Configure JetBrains Rider

=== Rider Cache Locations (Optional)

Edit:

Configure -> Edit Custom Properties

[source,properties]
----
idea.system.path=D:/tools/rider/system
idea.config.path=D:/tools/rider/config
idea.log.path=D:/tools/rider/log
----

Restart Rider.

== Microsoft Defender Exclusions (Alternative to Disabling Filters)
Windows Security > Virus & treat protection > Virus & treat protection settings > Manage settings
Dev drive protection: "On"
Exclusions > Add or Remove exclusions: Add disk "D:"

https://www.youtube.com/watch?v=y4bB0xpjJjk

